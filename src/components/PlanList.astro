---
type Plan = {
  date: string;
  title: string;
  category: "ã—ã‚“ã¶ã‚“" | "è‡ªç„¶ã¨ç§‘å­¦" | "æ–‡åŒ–ã¨èŠ¸è¡“" | "ã›ã„ã‹ã¤" | "ç ”ç©¶å®¤" | "é›‘è¨˜";
};

const categoryIcon: Record<Plan["category"], string> = {
  ã—ã‚“ã¶ã‚“: "ğŸ“°",
  è‡ªç„¶ã¨ç§‘å­¦: "ğŸª´",
  æ–‡åŒ–ã¨èŠ¸è¡“: "ğŸ¨",
  ã›ã„ã‹ã¤: "ğŸ²",
  ç ”ç©¶å®¤: "ğŸ“",
  é›‘è¨˜: "âœï¸",
};

const { plans, title = "åŸ·ç­†äºˆå®š", limit = 6 } = Astro.props as {
  plans: Plan[];
  title?: string;
  limit?: number;
};

const upcoming = [...plans]
  .sort((a, b) => (a.date > b.date ? 1 : -1))
  .slice(0, limit);
---
<section>
  <h2 class="h2">{title}</h2>

  <ul class="planLines">
    {upcoming.map((p) => (
      <li>
        <a href={`/date/${p.date}`}>
          {categoryIcon[p.category]}
          <span class="sep">ï¼</span>
          <span class="label">ï¼ˆäºˆå®šï¼‰</span>
          {p.title}
        </a>
      </li>
    ))}
  </ul>
</section>

<style>
  .planLines {
    list-style: none;
    padding: 0;
    margin: 8px 0 0;
  }

  .planLines li {
    padding: 6px 0;
    border-bottom: 1px dotted var(--line);
  }

  .planLines li:last-child {
    border-bottom: none;
  }

  .planLines a {
    color: var(--ink);
    text-decoration: none;
  }

  .planLines a:hover {
    text-decoration: underline;
  }

  .sep {
    margin: 0 4px;
    color: var(--muted);
  }

  .label {
    color: var(--muted);
    margin-right: 2px;
  }
</style>
