---
const items = [
  { href: "/", label: "ãƒ›ãƒ¼ãƒ ", icon: "â˜€ï¸" },
  { href: "/shimbun", label: "ã—ã‚“ã¶ã‚“", icon: "ğŸ“°" },
  { href: "/science", label: "è‡ªç„¶ã¨ç§‘å­¦", icon: "ğŸª´" },
  { href: "/culture", label: "æ–‡åŒ–ã¨èŠ¸è¡“", icon: "ğŸ¨" },
  { href: "/life", label: "ã›ã„ã‹ã¤", icon: "ğŸ²" },
  { href: "/lab", label: "ç ”ç©¶å®¤", icon: "ğŸ“" },
  { href: "/zatsuki", label: "é›‘è¨˜", icon: "âœï¸" },
];
---
<button id="sunFab" class="sunFab" type="button" aria-label="menu" aria-expanded="false">
  â˜€ï¸
</button>

<nav id="sunMenu" class="sunMenu" data-open="false" aria-label="site navigation">
  <div class="sunInner">
    {items.map((it) => (
      <a href={it.href} class="sunItem">
        <span aria-hidden="true">{it.icon}</span>
        <span>{it.label}</span>
      </a>
    ))}
  </div>
</nav>

<script is:inline>
  document.addEventListener("DOMContentLoaded", () => {
    const btn = document.getElementById("sunFab");
    const menu = document.getElementById("sunMenu");
    const page = document.getElementById("pageWrap");

    const setOpen = (next) => {
      menu.dataset.open = next ? "true" : "false";
      page.dataset.shift = next ? "true" : "false";
      btn.setAttribute("aria-expanded", next ? "true" : "false");
    };

    btn?.addEventListener("click", () => {
      const open = menu.dataset.open === "true";
      setOpen(!open);
    });

    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape") setOpen(false);
    });

    menu?.addEventListener("click", (e) => {
      const a = e.target?.closest?.("a");
      if (a) setOpen(false);
    });
  });
</script>
